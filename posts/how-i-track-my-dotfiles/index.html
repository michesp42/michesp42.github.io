<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>How to Set Up a Git Bare Repository to Track Dotfiles - Michael Espeña</title><meta name=Description content="Michael Espeña's blogs"><meta property="og:title" content="How to Set Up a Git Bare Repository to Track Dotfiles"><meta property="og:description" content="There are many ways to manage dotfiles on Linux and other Unix-like operating systems; you can do it manually, for example, using shell scripts and even Makefiles, or you can use dedicated tools like stow and yadm. Another common way people do it though is using git bare repositories, and it is the method of tracking dotfiles that I ultimately chose upon considering the alternatives.
When you use git normally you have a repository that contains a ."><meta property="og:type" content="article"><meta property="og:url" content="http://michesp42.github.io/posts/how-i-track-my-dotfiles/"><meta property="og:image" content="http://michesp42.github.io/posts/how-i-track-my-dotfiles/featured-image.jpg"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-10-14T12:28:49+08:00"><meta property="article:modified_time" content="2022-10-14T12:28:49+08:00"><meta property="og:site_name" content="Michael Espeña - Psyche"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="http://michesp42.github.io/posts/how-i-track-my-dotfiles/featured-image.jpg"><meta name=twitter:title content="How to Set Up a Git Bare Repository to Track Dotfiles"><meta name=twitter:description content="There are many ways to manage dotfiles on Linux and other Unix-like operating systems; you can do it manually, for example, using shell scripts and even Makefiles, or you can use dedicated tools like stow and yadm. Another common way people do it though is using git bare repositories, and it is the method of tracking dotfiles that I ultimately chose upon considering the alternatives.
When you use git normally you have a repository that contains a ."><meta name=application-name content="My cool site"><meta name=apple-mobile-web-app-title content="My cool site"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=http://michesp42.github.io/posts/how-i-track-my-dotfiles/><link rel=stylesheet href=/css/style.min.css><link rel=preload href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css></noscript><link rel=preload href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"How to Set Up a Git Bare Repository to Track Dotfiles","inLanguage":"en","mainEntityOfPage":{"@type":"WebPage","@id":"http:\/\/michesp42.github.io\/posts\/how-i-track-my-dotfiles\/"},"image":[{"@type":"ImageObject","url":"http:\/\/michesp42.github.io\/posts\/how-i-track-my-dotfiles\/featured-image.jpg","width":1920,"height":1280}],"genre":"posts","keywords":"linux, dotfiles, git","wordcount":642,"url":"http:\/\/michesp42.github.io\/posts\/how-i-track-my-dotfiles\/","datePublished":"2022-10-14T12:28:49+08:00","dateModified":"2022-10-14T12:28:49+08:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"Michael Espeña"},"description":""}</script></head><body data-header-desktop=fixed data-header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title="Michael Espeña"><span class=header-title-pre><i class='fas fa-terminal fa-fw' aria-hidden=true></i></span>Michael Espeña</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/about/>About </a><a class=menu-item href=/posts/>Posts </a><a class=menu-item href=/tags/>Tags </a><a class=menu-item href=/categories/>Categories </a><a class=menu-item href=https://github.com/michesp42 title=Github rel="noopener noreffer" target=_blank><i class='fab fa-github fa-fw'></i> </a><a class=menu-item href=https://gitlab.com/michesp42 title=gitlab rel="noopener noreffer" target=_blank><i class='fab fa-gitlab fa-fw'></i> </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop>
<input type=text placeholder="Search titles or contents..." id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=Search><i class="fas fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=Clear><i class="fas fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i></span>
</span><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="Michael Espeña"><span class=header-title-pre><i class='fas fa-terminal fa-fw' aria-hidden=true></i></span>Michael Espeña</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder="Search titles or contents..." id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=Search><i class="fas fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=Clear><i class="fas fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>Cancel</a></div><a class=menu-item href=/about/ title>About</a><a class=menu-item href=/posts/ title>Posts</a><a class=menu-item href=/tags/ title>Tags</a><a class=menu-item href=/categories/ title>Categories</a><a class=menu-item href=https://github.com/michesp42 title=Github rel="noopener noreffer" target=_blank><i class='fab fa-github fa-fw'></i></a><a class=menu-item href=https://gitlab.com/michesp42 title=gitlab rel="noopener noreffer" target=_blank><i class='fab fa-gitlab fa-fw'></i></a><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme">
<i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>Contents</h2><div class=toc-content id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">How to Set Up a Git Bare Repository to Track Dotfiles</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=https://github.com/michesp42 title=Author target=_blank rel="noopener noreffer author" class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>Michael Espeña</a></span>&nbsp;<span class=post-category>included in <a href=/categories/tutorials/><i class="far fa-folder fa-fw" aria-hidden=true></i>tutorials</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw" aria-hidden=true></i>&nbsp;<time datetime=2022-10-14>2022-10-14</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden=true></i>&nbsp;642 words&nbsp;
<i class="far fa-clock fa-fw" aria-hidden=true></i>&nbsp;4 minutes&nbsp;</div></div><div class=featured-image><img class=lazyload src=/svg/loading.min.svg data-src=/posts/how-i-track-my-dotfiles/featured-image.jpg data-srcset="/posts/how-i-track-my-dotfiles/featured-image.jpg, /posts/how-i-track-my-dotfiles/featured-image.jpg 1.5x, /posts/how-i-track-my-dotfiles/featured-image.jpg 2x" data-sizes=auto alt=/posts/how-i-track-my-dotfiles/featured-image.jpg title=/posts/how-i-track-my-dotfiles/featured-image.jpg></div><div class="details toc" id=toc-static data-kept><div class="details-summary toc-title"><span>Contents</span>
<span><i class="details-icon fas fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#step-1-initialize-repository>Step 1: Initialize repository</a></li><li><a href=#step-2-add-an-alias>Step 2: Add an alias</a></li><li><a href=#step-3-additional-configuration>Step 3: Additional configuration</a><ul><li><a href=#ignore-untracked-files>Ignore untracked files</a></li><li><a href=#remove-readme-and-license-from-home-sort-of>Remove <code>README</code> and <code>LICENSE</code> from <code>$HOME</code>, sort of</a></li></ul></li><li><a href=#step-4-manage-the-dotfiles>Step 4: Manage the dotfiles</a></li></ul></nav></div></div><div class=content id=content><p>There are many ways to manage
<a href=https://en.wikipedia.org/wiki/Hidden_file_and_hidden_directory target=_blank rel="noopener noreffer">dotfiles</a> on
Linux and other Unix-like operating systems; you can do it manually, for
example, using shell scripts and even
<a href=https://www.gnu.org/software/make/manual/html_node/Introduction.html target=_blank rel="noopener noreffer">Makefiles</a>,
or you can use dedicated tools like <a href=https://www.gnu.org/software/stow/ target=_blank rel="noopener noreffer">stow</a>
and <a href=https://yadm.io/ target=_blank rel="noopener noreffer">yadm</a>. Another common way people do it though is using
<em>git bare</em> repositories, and it is the method of tracking dotfiles that I
ultimately chose upon considering the alternatives.</p><p>When you use git normally you have a repository that contains a <code>.git</code> folder
meanwhile when you initialize a directory as a git bare repository it becomes
the <code>.git</code> folder itself, and you will have to track files that are outside of
it. This is perfect for tracking dotfiles that are all scattered all around in
your home directory.</p><p>In the following sections, I will show how to set up a bare repository with
some additional helpful git configurations, especially if you want to add
a <code>README</code> and <code>LICENSE</code> for your repository but don’t want them cluttering up
your home directory.</p><h2 id=step-1-initialize-repository>Step 1: Initialize repository</h2><p>The first thing we need to do is create a directory and initialize it as a git
bare repository. In my case, I usually create a <code>~/.local/dotfiles/</code> folder and
use it as the bare repository, but you can use any sensible directory you want.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>mkdir --parent ~/.local/dotfiles/
</span></span><span class=line><span class=cl><span class=nb>cd</span> ~/.local/dotfiles
</span></span><span class=line><span class=cl>git init --bare
</span></span></code></pre></div><p>Now we have a bare repository and if you list out its contents it will look
something like this</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>$ ls -F ~/.local/dotfiles/
</span></span><span class=line><span class=cl>branches/       config       HEAD    index  logs/     ORIG_HEAD
</span></span><span class=line><span class=cl>COMMIT_EDITMSG  description  hooks/  info/  objects/  refs/
</span></span></code></pre></div><p>which confirms that it really is just like a <code>.git</code> directory.</p><h2 id=step-2-add-an-alias>Step 2: Add an alias</h2><p>For git to know when we want to work with our dotfiles wherever in the
file system we have to specify a couple of flags, namely</p><ul><li><code>--git-dir</code> that is used to set the path to the repository and, for our
purposes, this should point to the dotfiles folder we set above</li><li><code>--work-tree</code> that is used to set the working tree, which we&rsquo;ll set to be the
home directory.</li></ul><p>Therefore, we&rsquo;ll have to run something like the following whenever we are
working with our dotfiles.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git --git-dir<span class=o>=</span><span class=s2>&#34;</span><span class=nv>$HOME</span><span class=s2>&#34;</span>/.local/dotfiles --work-tree<span class=o>=</span><span class=s2>&#34;</span><span class=nv>$HOME</span><span class=s2>&#34;</span> ...
</span></span></code></pre></div><p>This would be a hassle to type all the time, so we might as well add an alias
for it in our login shell&rsquo;s configuration file, e.g., the <code>~/.bashrc</code> file. I’m
calling the alias <code>dots</code>, but it can be anything you prefer.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>alias</span> <span class=nv>dots</span><span class=o>=</span><span class=s1>&#39;/usr/bin/git --git-dir=&#34;$HOME&#34;/.local/dotfiles --work-tree=&#34;$HOME&#34;&#39;</span>
</span></span></code></pre></div><h2 id=step-3-additional-configuration>Step 3: Additional configuration</h2><h3 id=ignore-untracked-files>Ignore untracked files</h3><p>By default, running <code>git status</code> will show all untracked files in the working
tree. We don’t want this for the <code>dots</code> alias since we are only interested in
the dotfiles we are tracking and not all the other files in our home directory,
so we have to add the following configuration for the bare repository.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>dots config --local status.showUntrackedFiles no
</span></span></code></pre></div><h3 id=remove-readme-and-license-from-home-sort-of>Remove <code>README</code> and <code>LICENSE</code> from <code>$HOME</code>, sort of</h3><div class="details admonition note open"><div class="details-summary admonition-title"><i class="icon fas fa-pencil-alt fa-fw" aria-hidden=true></i>Note<i class="details-icon fas fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content>This step is not essential for setting up a bare repository for your dotfiles,
but it might be worth doing for a cleaner home directory.</div></div></div><p>If you have a <code>README</code> and <code>LICENSE</code> file for your dotfiles repository, but you
want to get rid of them from the listings of your home directory, then you will
have to use <code>git sparse-checkout</code>. We first need to enable the sparse-checkout
feature and then set <code>README</code> and <code>LICENSE</code> to be ignored when we execute <code>dots sparse-checkout</code>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>dots config core.sparseCheckout <span class=nb>true</span>
</span></span><span class=line><span class=cl>dots sparse-checkout <span class=nb>set</span> <span class=s1>&#39;/*&#39;</span> <span class=s1>&#39;!README&#39;</span> <span class=s1>&#39;!LICENSE&#39;</span>
</span></span></code></pre></div><p>The <code>README</code> and <code>LICENSE</code> will now disappear from the home directory, but they
still exist and are being tracked by git, just not appearing in the working
tree.</p><h2 id=step-4-manage-the-dotfiles>Step 4: Manage the dotfiles</h2><p>Now we can use the <code>dots</code> alias like a normal git command to manage dotfiles
from anywhere in the file system.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>dots add ~/.bashrc
</span></span><span class=line><span class=cl>dots commit -m <span class=s1>&#39;add bashrc&#39;</span>
</span></span><span class=line><span class=cl>dots push -u origin main
</span></span></code></pre></div></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>Updated on 2022-10-14</span></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span><a href=javascript:void(0); title="Share on Twitter" data-sharer=twitter data-url=http://michesp42.github.io/posts/how-i-track-my-dotfiles/ data-title="How to Set Up a Git Bare Repository to Track Dotfiles" data-via=michesp42 data-hashtags=linux,dotfiles,git><i class="fab fa-twitter fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Facebook" data-sharer=facebook data-url=http://michesp42.github.io/posts/how-i-track-my-dotfiles/ data-hashtag=linux><i class="fab fa-facebook-square fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Linkedin" data-sharer=linkedin data-url=http://michesp42.github.io/posts/how-i-track-my-dotfiles/><i class="fab fa-linkedin fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Hacker News" data-sharer=hackernews data-url=http://michesp42.github.io/posts/how-i-track-my-dotfiles/ data-title="How to Set Up a Git Bare Repository to Track Dotfiles"><i class="fab fa-hacker-news fa-fw" aria-hidden=true></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw" aria-hidden=true></i>&nbsp;<a href=/tags/linux/>linux</a>,&nbsp;<a href=/tags/dotfiles/>dotfiles</a>,&nbsp;<a href=/tags/git/>git</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>Back</a></span>&nbsp;|&nbsp;<span><a href=/>Home</a></span></section></div><div class=post-nav></div></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line>Powered by <a href=https://gohugo.io/ target=_blank rel="noopener noreffer" title="Hugo 0.104.3">Hugo</a> | Theme - <a href=https://github.com/dillonzq/LoveIt target=_blank rel="noopener noreffer" title="LoveIt 0.2.11"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden=true></i> LoveIt</a></div><div class=footer-line itemscope itemtype=http://schema.org/CreativeWork><i class="far fa-copyright fa-fw" aria-hidden=true></i><span itemprop=copyrightYear>2022</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=https://github.com/michesp42 target=_blank>Michael Espeña</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top"><i class="fas fa-arrow-up fa-fw" aria-hidden=true></i>
</a><a href=# id=view-comments class=fixed-button title="View Comments"><i class="fas fa-comment fa-fw" aria-hidden=true></i></a></div><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css><script type=text/javascript src=https://cdn.jsdelivr.net/npm/autocomplete.js@0.38.1/dist/autocomplete.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lunr@2.3.9/lunr.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/auto-render.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/copy-tex.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/mhchem.min.js></script><script type=text/javascript>window.config={code:{copyTitle:"Copy to clipboard",maxShownLines:50},comment:{},math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!0,left:"\\begin{equation}",right:"\\end{equation}"},{display:!0,left:"\\begin{equation*}",right:"\\end{equation*}"},{display:!0,left:"\\begin{align}",right:"\\end{align}"},{display:!0,left:"\\begin{align*}",right:"\\end{align*}"},{display:!0,left:"\\begin{alignat}",right:"\\end{alignat}"},{display:!0,left:"\\begin{alignat*}",right:"\\end{alignat*}"},{display:!0,left:"\\begin{gather}",right:"\\end{gather}"},{display:!0,left:"\\begin{CD}",right:"\\end{CD}"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},search:{highlightTag:"em",lunrIndexURL:"/index.json",maxResultLength:10,noResultsFound:"No results found",snippetLength:30,type:"lunr"}}</script><script type=text/javascript src=/js/theme.min.js></script></body></html>