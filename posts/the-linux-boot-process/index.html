<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>The Linux Boot Process - Michael Espeña</title><meta name=Description content="Michael Espeña's blogs"><meta property="og:title" content="The Linux Boot Process"><meta property="og:description" content="UEFI and BIOS UEFI and BIOS are both firmwares on the hardware of the computer that allows the operating system (and other programs) to interface with the motherboard by providing runtime services during the booting process. UEFI stands for Unified Extensible Firmware interface while BIOS means Basic Input/Output System. UEFI was designed to overcome the shortcomings of BIOS especially for more modern hardware. The following summarizes the differences between UEFI and BIOS:"><meta property="og:type" content="article"><meta property="og:url" content="http://michesp42.github.io/posts/the-linux-boot-process/"><meta property="og:image" content="http://michesp42.github.io/posts/the-linux-boot-process/featured-image.jpg"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-08-06T09:26:14+08:00"><meta property="article:modified_time" content="2022-08-06T09:26:14+08:00"><meta property="og:site_name" content="Michael Espeña - Psyche"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="http://michesp42.github.io/posts/the-linux-boot-process/featured-image.jpg"><meta name=twitter:title content="The Linux Boot Process"><meta name=twitter:description content="UEFI and BIOS UEFI and BIOS are both firmwares on the hardware of the computer that allows the operating system (and other programs) to interface with the motherboard by providing runtime services during the booting process. UEFI stands for Unified Extensible Firmware interface while BIOS means Basic Input/Output System. UEFI was designed to overcome the shortcomings of BIOS especially for more modern hardware. The following summarizes the differences between UEFI and BIOS:"><meta name=application-name content="My cool site"><meta name=apple-mobile-web-app-title content="My cool site"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=http://michesp42.github.io/posts/the-linux-boot-process/><link rel=prev href=http://michesp42.github.io/posts/the-linux-file-hierarchy-structure/><link rel=stylesheet href=/css/style.min.css><link rel=preload href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css></noscript><link rel=preload href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"The Linux Boot Process","inLanguage":"en","mainEntityOfPage":{"@type":"WebPage","@id":"http:\/\/michesp42.github.io\/posts\/the-linux-boot-process\/"},"image":[{"@type":"ImageObject","url":"http:\/\/michesp42.github.io\/posts\/the-linux-boot-process\/featured-image.jpg","width":4032,"height":2164}],"genre":"posts","keywords":"linux","wordcount":596,"url":"http:\/\/michesp42.github.io\/posts\/the-linux-boot-process\/","datePublished":"2022-08-06T09:26:14+08:00","dateModified":"2022-08-06T09:26:14+08:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"Michael Espeña"},"description":""}</script></head><body data-header-desktop=fixed data-header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title="Michael Espeña"><span class=header-title-pre><i class='fas fa-terminal fa-fw' aria-hidden=true></i></span>Michael Espeña</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/about/>About </a><a class=menu-item href=/posts/>Posts </a><a class=menu-item href=/tags/>Tags </a><a class=menu-item href=/categories/>Categories </a><a class=menu-item href=https://github.com/michesp42 title=Github rel="noopener noreffer" target=_blank><i class='fab fa-github fa-fw'></i> </a><a class=menu-item href=https://gitlab.com/michesp42 title=gitlab rel="noopener noreffer" target=_blank><i class='fab fa-gitlab fa-fw'></i> </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop>
<input type=text placeholder="Search titles or contents..." id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=Search><i class="fas fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=Clear><i class="fas fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i></span>
</span><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="Michael Espeña"><span class=header-title-pre><i class='fas fa-terminal fa-fw' aria-hidden=true></i></span>Michael Espeña</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder="Search titles or contents..." id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=Search><i class="fas fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=Clear><i class="fas fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>Cancel</a></div><a class=menu-item href=/about/ title>About</a><a class=menu-item href=/posts/ title>Posts</a><a class=menu-item href=/tags/ title>Tags</a><a class=menu-item href=/categories/ title>Categories</a><a class=menu-item href=https://github.com/michesp42 title=Github rel="noopener noreffer" target=_blank><i class='fab fa-github fa-fw'></i></a><a class=menu-item href=https://gitlab.com/michesp42 title=gitlab rel="noopener noreffer" target=_blank><i class='fab fa-gitlab fa-fw'></i></a><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme">
<i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>Contents</h2><div class=toc-content id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">The Linux Boot Process</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=https://github.com/michesp42 title=Author target=_blank rel="noopener noreffer author" class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>Michael Espeña</a></span>&nbsp;<span class=post-category>included in <a href=/categories/notes/><i class="far fa-folder fa-fw" aria-hidden=true></i>notes</a>&nbsp;<a href=/categories/tutorial/><i class="far fa-folder fa-fw" aria-hidden=true></i>tutorial</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw" aria-hidden=true></i>&nbsp;<time datetime=2022-08-06>2022-08-06</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden=true></i>&nbsp;596 words&nbsp;
<i class="far fa-clock fa-fw" aria-hidden=true></i>&nbsp;3 minutes&nbsp;</div></div><div class=featured-image><img class=lazyload src=/svg/loading.min.svg data-src=/posts/the-linux-boot-process/featured-image.jpg data-srcset="/posts/the-linux-boot-process/featured-image.jpg, /posts/the-linux-boot-process/featured-image.jpg 1.5x, /posts/the-linux-boot-process/featured-image.jpg 2x" data-sizes=auto alt=/posts/the-linux-boot-process/featured-image.jpg title=/posts/the-linux-boot-process/featured-image.jpg></div><div class="details toc" id=toc-static data-kept><div class="details-summary toc-title"><span>Contents</span>
<span><i class="details-icon fas fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#uefi-and-bios>UEFI and BIOS</a></li><li><a href=#boot-sources>Boot sources</a></li><li><a href=#grub2>GRUB2</a></li><li><a href=#the-boot-process>The Boot Process</a></li><li><a href=#configuring-grub>Configuring GRUB</a></li><li><a href=#references-and-further-reading>References and Further Reading</a></li></ul></nav></div></div><div class=content id=content><h2 id=uefi-and-bios>UEFI and BIOS</h2><p><a href=https://en.wikipedia.org/wiki/UEFI target=_blank rel="noopener noreffer">UEFI</a> and
<a href=https://en.wikipedia.org/wiki/BIOS target=_blank rel="noopener noreffer">BIOS</a> are both firmwares on the hardware of
the computer that allows the operating system (and other programs) to interface
with the motherboard by providing runtime services during the booting process.
UEFI stands for Unified Extensible Firmware interface while BIOS means Basic
Input/Output System. UEFI was designed to overcome the shortcomings of BIOS
especially for more modern hardware. The following summarizes the differences
between UEFI and BIOS:</p><table><thead><tr><th>UEFI</th><th>BIOS</th></tr></thead><tbody><tr><td>newer</td><td>old/legacy</td></tr><tr><td>uses hard drive partition to store configuration</td><td>configured and stored in mother board</td></tr><tr><td>supports drive sizes up to 9 zettabytes</td><td>supports only up to 2.2 TB drives</td></tr><tr><td>provides faster boot time than BIOS</td><td>slower boot time than UEFI</td></tr><tr><td>offers secure boot</td><td>less secure that UEFI</td></tr><tr><td>runs on 32- or 64-bit mode</td><td>runs on 16-bit mode</td></tr><tr><td>offers GUI (with mouse navigation) interface</td><td>keyboard only interface</td></tr></tbody></table><h2 id=boot-sources>Boot sources</h2><p>The following are sources from which Linux can boot:</p><ul><li>hard disk</li><li>usb devices</li><li>cd/dvd</li><li>PXE and iPXE</li></ul><p>The first three options are the most common boot sources, for instance, booting
from the hard drive from which the OS is installed or a bootable usb stick.
Pre-boot eXecution Environment
(<a href=https://en.wikipedia.org/wiki/Preboot_Execution_Environment target=_blank rel="noopener noreffer">PXE</a>) and iPXE
allows you to boot from the network.</p><h2 id=grub2>GRUB2</h2><p>The GRand Unified Bootloader (<a href=https://en.wikipedia.org/wiki/GNU_GRUB target=_blank rel="noopener noreffer">GRUB</a>) is
a <em>boot loader</em> that is the first software program that runs when a computer
starts. From a casual user standpoint, its purpose is it lets you select where
you want to boot to. The GRUB bootloader allows you to boot off the following
sources:</p><ul><li>ISO file</li><li>memtest</li><li>other operating systems</li></ul><p>GRUB2 is the latest iteration of GRUB implementation and is the default version
used.</p><h2 id=the-boot-process>The Boot Process</h2><p>The following diagram illustrates a normal Linux boot process:</p><div class=mermaid id=id-1></div><p>Starting with UEFI or BIOS, we go to the GRUB bootloader (assuming we boot off
the hard drive normally). GRUB then loads <code>vmlinux</code>. The
<a href=https://en.wikipedia.org/wiki/Vmlinux target=_blank rel="noopener noreffer">vmlinux</a> file is a linked executable
that contains the Linux kernel. What you&rsquo;ll typically find however in <code>/boot</code> is
its the compressed version <code>vmlinuz</code> which is the case with my computer</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ ls -F /boot
</span></span><span class=line><span class=cl>EFI/   initramfs-linux-fallback.img*  intel-ucode.img*
</span></span><span class=line><span class=cl>grub/  initramfs-linux.img*	      vmlinuz-linux*
</span></span></code></pre></td></tr></table></div></div><p>The kernel <code>vmlinux</code> is a generic kernel compiled for a multitude of hardware.
Because the kernel modules needed for a system is dependent on the specific
hardware it has, we need a way to load the kernel modules that a system&rsquo;s
hardware needs. That is where
<a href=https://en.wikipedia.org/wiki/Initial_ramdisk target=_blank rel="noopener noreffer">initrd</a> comes in. <code>Initrd</code> is a
scheme to load just enough software like kernel modules to recognize the system
hardware.<code>Initramfs</code>, an alternative scheme to <code>initrd</code> is a filesystem takes
care of mounting important file systems by also loading the proper kernel
modules and drivers for the system hardware.</p><h2 id=configuring-grub>Configuring GRUB</h2><p>The configuration file for grub is located in <code>/boot/grub/grub.cfg</code> but the file
you edit is <code>/etc/default/grub</code>. For example, during installation of my system I
edited the settings for <code>GRUB_GFXMODE</code> to <code>1920x1080</code> screen resolution and set
the <code>GRUB_TIMEOUT</code> to 3 so that the GRUB menu disappears faster.</p><p>After you edit <code>/etc/default/grub</code>, you can then run a command to create the
grub configuration which is <code>update-grub</code> or <code>update-grub2</code> for Ubuntu-based
distributions, <code>grub2-mkconfig</code> for RHEL-based distributions, and simply
<code>grub-mkconfig</code> for Arch-based distributions.</p><div class="details admonition info open"><div class="details-summary admonition-title"><i class="icon fas fa-info-circle fa-fw" aria-hidden=true></i>Info<i class="details-icon fas fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content>Ubuntu&rsquo;s <code>update-grub</code>/<code>update-grub2</code> just uses <code>grub-mkconfig</code> or
<code>grub2-mkconfig</code> behind the scenes. It should also be noted that there is also a
command called <a href=https://linux.die.net/man/8/grubby target=_blank rel="noopener noreffer">grubby</a> for configuring GRUB
in RHEL-based distributions.</div></div></div><p>We use command mentioned like so:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># for Ubuntu-based distros</span>
</span></span><span class=line><span class=cl>update-grub
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># for RHEL-based distros</span>
</span></span><span class=line><span class=cl>grub2-mkconfig - /boot/grub/grub.cfg
</span></span></code></pre></td></tr></table></div></div><h2 id=references-and-further-reading>References and Further Reading</h2><ul><li><a href="https://www.youtube.com/watch?v=esH6GUjVa8Y&t=261s" target=_blank rel="noopener noreffer">The Linux Boot Process (Linux+ Objective 1.1.2)</a></li><li><a href=https://www.freecodecamp.org/news/uefi-vs-bios/ target=_blank rel="noopener noreffer">UEFI vs BIOS: What&rsquo;s the Difference?</a></li></ul></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>Updated on 2022-08-06</span></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span><a href=javascript:void(0); title="Share on Twitter" data-sharer=twitter data-url=http://michesp42.github.io/posts/the-linux-boot-process/ data-title="The Linux Boot Process" data-via=michesp42 data-hashtags=linux><i class="fab fa-twitter fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Facebook" data-sharer=facebook data-url=http://michesp42.github.io/posts/the-linux-boot-process/ data-hashtag=linux><i class="fab fa-facebook-square fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Linkedin" data-sharer=linkedin data-url=http://michesp42.github.io/posts/the-linux-boot-process/><i class="fab fa-linkedin fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Hacker News" data-sharer=hackernews data-url=http://michesp42.github.io/posts/the-linux-boot-process/ data-title="The Linux Boot Process"><i class="fab fa-hacker-news fa-fw" aria-hidden=true></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw" aria-hidden=true></i>&nbsp;<a href=/tags/linux/>linux</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>Back</a></span>&nbsp;|&nbsp;<span><a href=/>Home</a></span></section></div><div class=post-nav><a href=/posts/the-linux-file-hierarchy-structure/ class=prev rel=prev title="The Linux File Hierarchy Structure"><i class="fas fa-angle-left fa-fw" aria-hidden=true></i>The Linux File Hierarchy Structure</a></div></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line>Powered by <a href=https://gohugo.io/ target=_blank rel="noopener noreffer" title="Hugo 0.101.0">Hugo</a> | Theme - <a href=https://github.com/dillonzq/LoveIt target=_blank rel="noopener noreffer" title="LoveIt 0.2.11"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden=true></i> LoveIt</a></div><div class=footer-line itemscope itemtype=http://schema.org/CreativeWork><i class="far fa-copyright fa-fw" aria-hidden=true></i><span itemprop=copyrightYear>2022</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=https://github.com/michesp42 target=_blank>Michael Espeña</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top"><i class="fas fa-arrow-up fa-fw" aria-hidden=true></i>
</a><a href=# id=view-comments class=fixed-button title="View Comments"><i class="fas fa-comment fa-fw" aria-hidden=true></i></a></div><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css><script type=text/javascript src=https://cdn.jsdelivr.net/npm/autocomplete.js@0.38.1/dist/autocomplete.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lunr@2.3.9/lunr.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/auto-render.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/copy-tex.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/mhchem.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/mermaid@9.1.3/dist/mermaid.min.js></script><script type=text/javascript>window.config={code:{copyTitle:"Copy to clipboard",maxShownLines:50},comment:{},data:{"id-1":`    flowchart LR
	  subgraph VMLINUX
	    direction TB
        initrd[init ram disk] --\u003e vmlin[vmlinux or vmlinuz]
        initramfs[initramfs] --\u003e vmlin
        style initrd stroke-width:2px,stroke-dasharray: 5 5
        style initramfs stroke-width:2px,stroke-dasharray: 5 5
      end
      subgraph KERNEL
        direction TB
	    modules[modules] --\u003e fullkernel[full kernel]
        style modules stroke-width:2px,stroke-dasharray: 5 5
      end
      bios[BIOS or UEFI] --\u003e VMLINUX
      VMLINUX --\u003e KERNEL`},math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!0,left:"\\begin{equation}",right:"\\end{equation}"},{display:!0,left:"\\begin{equation*}",right:"\\end{equation*}"},{display:!0,left:"\\begin{align}",right:"\\end{align}"},{display:!0,left:"\\begin{align*}",right:"\\end{align*}"},{display:!0,left:"\\begin{alignat}",right:"\\end{alignat}"},{display:!0,left:"\\begin{alignat*}",right:"\\end{alignat*}"},{display:!0,left:"\\begin{gather}",right:"\\end{gather}"},{display:!0,left:"\\begin{CD}",right:"\\end{CD}"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},search:{highlightTag:"em",lunrIndexURL:"/index.json",maxResultLength:10,noResultsFound:"No results found",snippetLength:30,type:"lunr"}}</script><script type=text/javascript src=/js/theme.min.js></script></body></html>